## X. برابری توسعه دهنده/تولیدکننده
### توسعه، صحنه‌سازی و تولید را تا حد امکان مشابه نگه دارید

از لحاظ تاریخی، شکاف های قابل توجهی بین توسعه (توسعه دهنده ای که ویرایش های زنده در [deploy] (./codebase) محلی برنامه انجام می دهد) و تولید (استقرار در حال اجرا برنامه که توسط کاربران نهایی قابل دسترسی است) وجود داشته است. این شکاف ها در سه حوزه ظاهر می شوند:

* **فاصله زمانی**: یک توسعه دهنده ممکن است روی کدی کار کند که تولید آن روزها، هفته ها یا حتی ماه ها طول می کشد.
* **شکاف پرسنل**: توسعه دهندگان کد می نویسند، مهندسان عملیات آن را مستقر می کنند.
* **شکاف ابزار**: توسعه دهندگان ممکن است از پشته ای مانند Nginx، SQLite و OS X استفاده کنند، در حالی که توسعه تولید از Apache، MySQL و Linux استفاده می کند.

**برنامه دوازده عاملی برای [استقرار مستمر] (http://avc.com/2011/02/continuous-deployment/) طراحی شده است و فاصله بین توسعه و تولید را کم نگه می دارد.** با نگاهی به سه شکاف توضیح داده شده در بالا:

* فاصله زمانی را کم کنید: یک برنامه نویس ممکن است کد بنویسد و چند ساعت یا حتی چند دقیقه بعد آن را مستقر کند.
* شکاف پرسنل را کوچک کنید: توسعه دهندگانی که کد نوشتند از نزدیک در استقرار آن و مشاهده رفتار آن در تولید نقش دارند.
* شکاف ابزارها را کوچک کنید: توسعه و تولید را تا حد امکان مشابه نگه دارید.

خلاصه موارد فوق در جدول:

<جدول>
   <tr>
     <th></th>
     <th>برنامه سنتی</th>
     <th>برنامه دوازده عاملی</th>
   </tr>
   <tr>
     <th>زمان بین استقرار</th>
     <td>هفته</td>
     <td>ساعت</td>
   </tr>
   <tr>
     <th>نویسندگان کد در مقابل گسترش دهندگان کد</th>
     <td>افراد مختلف</td>
     <td>همان افراد</td>
   </tr>
   <tr>
     <th>محیط های توسعه دهنده در مقابل تولید</th>
     <td>واگرا</td>
     <td>تا حد امکان مشابه</td>
   </tr>
</table>

[سرویس‌های پشتیبان] (./backing-services)، مانند پایگاه داده برنامه، سیستم صف یا حافظه پنهان، یکی از حوزه‌هایی است که برابری برنامه‌نویس/پروید مهم است. بسیاری از زبان‌ها کتابخانه‌هایی را ارائه می‌کنند که دسترسی به سرویس پشتیبان را ساده می‌کنند، از جمله *آداپتورهای* برای انواع مختلف خدمات. چند نمونه در جدول زیر آمده است.

<جدول>
   <tr>
     <th>نوع</th>
     <th>زبان</th>
     <th>کتابخانه</th>
     <th>آداپتورها</th>
   </tr>
   <tr>
     <td>پایگاه داده</td>
     <td>روبی/ریل</td>
     <td>ActiveRecord</td>
     <td>MySQL، PostgreSQL، SQLite</td>
   </tr>
   <tr>
     <td>صف</td>
     <td>Python/Django</td>
     <td>کرفس</td>
     <td>RabbitMQ، Beanstalkd، Redis</td>
   </tr>
   <tr>
     <td>حافظه پنهان</td>
     <td>روبی/ریل</td>
     <td>ActiveSupport::Cache</td>
     <td>حافظه، سیستم فایل، Memcached</td>
   </tr>
</table>

توسعه دهندگان گاهی اوقات جذابیت زیادی در استفاده از یک سرویس پشتیبان سبک وزن در محیط های محلی خود پیدا می کنند، در حالی که یک سرویس پشتیبان جدی تر و قوی تر در تولید استفاده می شود. به عنوان مثال، استفاده از SQLite به صورت محلی و PostgreSQL در تولید. یا حافظه فرآیند محلی برای ذخیره سازی در توسعه و Memcached در تولید.

**توسعه‌دهنده دوازده عاملی در برابر اصرار برای استفاده از خدمات پشتیبان مختلف بین توسعه و تولید مقاومت می‌کند، حتی زمانی که آداپتورها از نظر تئوری هرگونه تفاوت در خدمات پشتیبان را از بین می‌برند. تفاوت بین سرویس‌های پشتیبان به این معنی است که ناسازگاری‌های کوچک ظاهر می‌شوند و باعث می‌شوند کدهایی که کار می‌کردند و آزمایش‌هایشان را در مرحله توسعه یا مرحله‌بندی پشت سر گذاشتند، در تولید شکست بخورند. این نوع خطاها باعث ایجاد اصطکاک می شود که استقرار مداوم را از بین می برد. هزینه این اصطکاک و میرایی متعاقب آن در استقرار مداوم زمانی که در کل در طول عمر یک برنامه کاربردی در نظر گرفته شود بسیار زیاد است.

خدمات محلی سبک وزن کمتر از گذشته قانع کننده هستند. نصب و اجرای سرویس‌های پشتیبان مدرن مانند Memcached، PostgreSQL و RabbitMQ به لطف سیستم‌های بسته‌بندی مدرن، مانند [Homebrew](http://mxcl.github.com/homebrew/) و [apt-get]( https://help.ubuntu.com/community/AptGet/Howto). از طرف دیگر، ابزارهای ارائه اعلامی مانند [Chef](http://www.opscode.com/chef/) و [Puppet] (http://docs.puppetlabs.com/) همراه با محیط های مجازی سبک وزن مانند [ Docker](https://www.docker.com/) و [Vagrant](http://vagrantup.com/) به توسعه‌دهندگان اجازه می‌دهند محیط‌های محلی را اجرا کنند که تقریباً به محیط‌های تولید تقریب دارند. هزینه نصب و استفاده از این سیستم ها در مقایسه با مزیت برابری dev/prod و استقرار مداوم پایین است.

آداپتورهای سرویس‌های پشتیبان مختلف هنوز مفید هستند، زیرا انتقال به سرویس‌های پشتیبان جدید را نسبتاً بدون دردسر می‌سازند. اما همه راه‌اندازی‌های برنامه (محیط‌های توسعه‌دهنده، مرحله‌بندی، تولید) باید از یک نوع و نسخه مشابه از هر یک از خدمات پشتیبان استفاده کنند.
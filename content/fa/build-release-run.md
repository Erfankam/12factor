## V. ساخت، انتشار، اجرا
### مراحل ساخت و اجرا را کاملاً جدا کنید

یک [codebase](./codebase) طی سه مرحله به یک استقرار (غیر توسعه‌ای) تبدیل می‌شود:

* مرحله *build* تبدیلی است که مخزن کد را به یک بسته اجرایی معروف به *build* تبدیل می کند. با استفاده از نسخه ای از کد در یک commit مشخص شده توسط فرآیند استقرار، مرحله ساخت، وابستگی‌ها را [وابستگی ها] (./dependencies) را واکشی می کند و باینری ها و  منابع را کامپایل می کند.
* مرحله *انتشار* خروجی تولید شده توسط مرحله ساخت را می گیرد و آن را با [config] (./config) فعلی Deploy ترکیب می کند. *انتشار* حاصل شامل ساخت و پیکربندی است و برای اجرای فوری در محیط اجرا آماده است.
* مرحله *run* (همچنین به عنوان "زمان اجرا" شناخته می شود) برنامه را در محیط عملیاتی  با راه‌اندازی مجموعه ای از [فرآیندهای] (./processes) برنامه در برابر نسخه انتخاب شده. اجرا می کند،

![کد به یک بسته تبدیل می‌شود که با پیکربندی ترکیب می‌شود تا یک نسخه ایجاد شود.](/images/release.png)

**برنامه دوازده-سازه از جداسازی دقیق بین مراحل ساخت، انتشار و اجرا استفاده می کند.** به عنوان مثال، ایجاد تغییرات در کد در زمان اجرا غیرممکن است، زیرا هیچ راهی برای انتشار مجدد این تغییرات به ساخت وجود ندارد.

ابزارهای استقرار معمولاً ابزارهای مدیریت انتشار به ویژه توانایی بازگشت به نسخه پیشین را ارائه می‌دهند. برای مثال، ابزار استقرار [Capistrano](https://github.com/capistrano/capistrano/wiki) نسخه‌ها را در زیر شاخه‌ای به نام `releases` ذخیره می‌کند، جایی که نسخه فعلی یک پیوند نمادین به فهرست انتشار فعلی است. دستور `rollback` آن، بازگشت سریع به نسخه  پیشین را آسان می‌کند.

هر نسخه باید همیشه یک شناسه‌ی انتشار منحصر به فرد، مانند مهر زمانی انتشار (مانند `2011-04-06-20:32:17`) یا یک عدد افزایشی (مانند `v100`) داشته باشد. نسخه‌ها فقط یک دفتر کل ضمیمه هستند و یک نسخه پس از ایجاد نمی‌تواند جهش یابد. هر تغییری باید یک نسخه جدید ایجاد کند.

هر زمان که کد جدیدی اجرا شود، ساخت‌ها توسط توسعه‌دهندگان برنامه آغاز می‌شوند. در مقابل، اجرای آن می تواند به طور خودکار در مواردی مانند راه اندازی مجدد سرور، یا راه اندازی مجدد فرآیند از کار افتاده توسط مدیر فرآیند اتفاق بیفتد. بنابراین، مرحله اجرا باید تا حد امکان در قسمت‌های متغیر کمتری نگه داشته شود، زیرا مشکلاتی که مانع از اجرای برنامه می‌شوند، می‌توانند باعث خرابی آن در نیمه‌های شب و زمانی که هیچ توسعه‌دهنده‌ای در دسترس نیست، شود. مرحله ساخت می‌تواند پیچیده‌تر باشد، زیرا خطاها همیشه در پیش‌روی توسعه‌دهنده‌های هستند که توسعه را هدایت می‌کنند.
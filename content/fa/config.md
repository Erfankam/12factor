## III. پیکربندی
### پیکربندی را در محیط ذخیره کنید

*پیکربندی* یک برنامه هر چیزی است که احتمالاً بین [استقرار](./codebase) های گوناگون، متفاوت است (استیجینگ، تولید، محیط های توسعه دهنده و غیره). این‌ها شامل موارد زیر هستند:

* دسته های منابع به پایگاه داده، Memcached، و سایر [سرویس‌های پشتیبان](./backing-services)
* موارد محرمانه مربوطه به خدمات خارجی مانند آمازون S3 یا توییتر
* مقادیر هر استقرار مانند نام میزبان متعارف برای استقرار

گاهی اوقات برنامه ها پیکربندی را به صورت ثابت در کد ذخیره می کنند. این یک نقض دوازده-سازه است که مستلزم جداسازی دقیق پیکربندی از کد ** است. پیکربندی به طور قابل توجهی در بین استقرارها متفاوت است، در حالی که در مخزن کد، این‌گونه نیست.
a
یک آزمون تورنسل برای اینکه آیا یک برنامه تمام تنظیمات را به درستی از کد خارج کرده است یا خیر، این است که آیا پایگاه کد می تواند در هر لحظه منبع باز شود، بدون اینکه هیچ محرمانگی از برنامه به خطر بیفتد.

توجه داشته باشید که این تعریف از "config" ** شامل پیکربندی برنامه داخلی نیست، مانند "config/routes.rb" در Rails، یا نحوه اتصال [ماژول‌های کد](Spring/docs/current/spring-framework-reference/html/beans.html) در [Spring](http://spring.io/). این نوع پیکربندی در بین استقرارها متفاوت نیست، و بنابراین بهتر است در کد انجام شود.

روش دیگر برای پیکربندی، استفاده از فایل‌های پیکربندی است که در کنترل نسخه بررسی نمی‌شوند، مانند «config/database.yml» در Rails. این یک پیشرفت بزرگ نسبت به استفاده از ثابت‌هایی است که در مخزن کد بررسی می‌شوند، اما همچنان دارای نقاط ضعفی است: بررسی اشتباه در یک فایل پیکربندی در مخزن کد آسان است. این تمایل وجود دارد که فایل‌های پیکربندی در مکان‌های مختلف و فرمت‌های مختلف پراکنده شوند، که دیدن و مدیریت تمام تنظیمات در یک مکان را دشوار می‌کند. علاوه بر این، این قالب‌ها معمولاً مختص زبان یا چارچوب هستند.

**پیکربندی برنامه دوازده-سازه در *متغیرهای محیط**** (اغلب به *env vars* یا *env* کوتاه می‌شود). متغیرهای Env به راحتی بین استقرارها بدون تغییر هیچ کدی قابل تغییر هستند. بر خلاف فایل های پیکربندی، احتمال کمی وجود دارد که آنها به طور تصادفی در مخزن کد بررسی شوند. و برخلاف فایل‌های پیکربندی سفارشی، یا مکانیزم‌های پیکربندی دیگر مانند System Properties در جاوا، یک استاندارد زبان و سیستم عامل هستند.

یکی دیگر از جنبه های مدیریت پیکربندی، گروه بندی است. گاهی اوقات برنامه‌ها پیکربندی دسته‌ای را در گروه‌های نام‌گذاری‌شده (اغلب «محیط‌ها» نامیده می‌شوند) با نام‌گذاری‌های خاص، مانند محیط‌های «توسعه»، «تست» و «تولید» در Rails ترکیب می‌کنند. این روش به طور ذاتی مقیاس‌پذیر نیستند که در این صورت ایجاد تعداد بیشتری از برنامه‌ها، نام‌های محیط جدیدی مانند «staging» یا «qa» ضروری است. همانطور که پروژه بزرگ‌تر می شود، توسعه دهندگان ممکن است محیط های خاص خود را مانند "joes-staging" اضافه کنند، که منجر به انفجار ترکیبی از پیکربندی می شود که مدیریت استقرار برنامه را بسیار شکننده می کند.

در یک برنامه دوازده-سازه، env vars کنترل‌های دانه‌ای هستند که هر کدام کاملاً متعامد با سایر env vars هستند. آنها هرگز به عنوان "محیط" گروه بندی نمی شوند، بلکه به طور مستقل برای هر استقرار مدیریت می شوند. این مدلی است که اندازه‌ی آن به آرامی افزایش می یابد زیرا برنامه به طور طبیعی در طول عمر خود به طور فزاینده‌ای گسترش می یابد.